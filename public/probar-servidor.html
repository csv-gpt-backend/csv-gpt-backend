<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<title>Probar /api/ask (same-origin)</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; max-width: 900px; margin: 24px auto; padding: 0 16px; }
  button { padding: 10px 16px; border-radius: 8px; border: 1px solid #ddd; background: #0d6efd; color: #fff; font-weight: 600; cursor: pointer; }
  pre { background: #f7f7f8; padding: 12px; border-radius: 8px; white-space: pre-wrap; }
</style>
</head>
<body>
  <h1>Probar /api/ask (same-origin)</h1>

  <p><button id="btn">Probar ping</button></p>
  <pre id="out">Listo para probar…</pre>

<script>
document.getElementById('btn').onclick = async () => {
  const out = document.getElementById('out');
  out.textContent = 'Consultando /api/ask?q=ping&file=decimo.csv …';
  try {
    const r = await fetch('/api/ask?q=ping&file=decimo.csv', {
      method: 'GET',
      headers: { 'Accept': 'application/json' }
    });
    const txt = await r.text();
    out.textContent = 'HTTP ' + r.status + '\n\n' + txt;
  } catch (e) {
    out.textContent = 'ERROR: ' + (e?.message || e);
    console.error(e);
  }
};
</script>
</body>
</html>
